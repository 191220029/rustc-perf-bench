# 2024-02-20 Triage Log

TODO: Summary

Triage done by **@???**.
Revision range: [74c3f5a1..5af21304](https://perf.rust-lang.org/?start=74c3f5a146860c94ff4d179fc3bfa34f879adf41&end=5af2130440c198afefbe5b8099342057cf272ef4&absolute=false&stat=instructions%3Au)

**Summary**:

| (instructions:u)                   | mean  | range           | count |
|:----------------------------------:|:-----:|:---------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.5%  | [0.5%, 0.5%]    | 1     |
| Regressions ❌ <br /> (secondary)  | 7.1%  | [0.5%, 78.5%]   | 17    |
| Improvements ✅ <br /> (primary)   | -2.4% | [-13.9%, -0.4%] | 222   |
| Improvements ✅ <br /> (secondary) | -2.0% | [-9.8%, -0.3%]  | 155   |
| All ❌✅ (primary)                 | -2.4% | [-13.9%, 0.5%]  | 223   |


3 Regressions, 1 Improvements, 6 Mixed; ??? of them in rollups
65 artifact comparisons made in total

#### Regressions

Tracking import use types for more accurate redundant import checking [#117772](https://github.com/rust-lang/rust/pull/117772) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=6f726205a1b7992537ddec96c83f2b054b03e04f&end=8b21296b5db6d5724d6b8440dcf459fa82fd88b5&stat=instructions:u)

| (instructions:u)                   | mean | range        | count |
|:----------------------------------:|:----:|:------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.4% | [0.2%, 1.0%] | 44    |
| Regressions ❌ <br /> (secondary)  | 0.7% | [0.4%, 1.1%] | 13    |
| Improvements ✅ <br /> (primary)   | -    | -            | 0     |
| Improvements ✅ <br /> (secondary) | -    | -            | 0     |
| All ❌✅ (primary)                 | 0.4% | [0.2%, 1.0%] | 44    |


macro_rules: Preserve all metavariable spans in a global side table [#119673](https://github.com/rust-lang/rust/pull/119673) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=8a497723e311a62fccb1f0bf40e79c6519744a12&end=2bf78d12d33ae02d10010309a0d85dd04e7cff72&stat=instructions:u)

| (instructions:u)                   | mean | range        | count |
|:----------------------------------:|:----:|:------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.4% | [0.1%, 1.3%] | 26    |
| Regressions ❌ <br /> (secondary)  | 0.5% | [0.1%, 3.3%] | 12    |
| Improvements ✅ <br /> (primary)   | -    | -            | 0     |
| Improvements ✅ <br /> (secondary) | -    | -            | 0     |
| All ❌✅ (primary)                 | 0.4% | [0.1%, 1.3%] | 26    |


Always evaluate free constants and statics, even if previous errors occurred [#121087](https://github.com/rust-lang/rust/pull/121087) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=5af2130440c198afefbe5b8099342057cf272ef4&end=cce6a6e22e715bd74455f2560a956ab920c3a914&stat=instructions:u)

| (instructions:u)                   | mean | range        | count |
|:----------------------------------:|:----:|:------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.8% | [0.4%, 2.0%] | 4     |
| Regressions ❌ <br /> (secondary)  | 1.0% | [0.3%, 5.2%] | 11    |
| Improvements ✅ <br /> (primary)   | -    | -            | 0     |
| Improvements ✅ <br /> (secondary) | -    | -            | 0     |
| All ❌✅ (primary)                 | 0.8% | [0.4%, 2.0%] | 4     |


#### Improvements

pattern_analysis: Move constructor selection logic to `PlaceInfo` [#120692](https://github.com/rust-lang/rust/pull/120692) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=0b9f6ad99482c9fc35baa5f40cebf21be4fd98b3&end=bcea3cb748040aa507f44abbd66c50725f35ea4f&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | -     | -              | 0     |
| Improvements ✅ <br /> (primary)   | -     | -              | 0     |
| Improvements ✅ <br /> (secondary) | -1.8% | [-1.9%, -1.7%] | 6     |
| All ❌✅ (primary)                 | -     | -              | 0     |


#### Mixed

Merge `impl_polarity` and `impl_trait_ref` queries [#120919](https://github.com/rust-lang/rust/pull/120919) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=0a5b998c57a8681acc13206b5917340b053b3a30&end=d26b41711282042c4ea0c5733e7332b07cfa4933&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.6%  | [0.5%, 0.7%]   | 3     |
| Regressions ❌ <br /> (secondary)  | 1.5%  | [1.5%, 1.5%]   | 1     |
| Improvements ✅ <br /> (primary)   | -0.3% | [-0.7%, -0.2%] | 43    |
| Improvements ✅ <br /> (secondary) | -0.4% | [-0.5%, -0.2%] | 5     |
| All ❌✅ (primary)                 | -0.3% | [-0.7%, 0.7%]  | 46    |


Update to LLVM 18 [#120055](https://github.com/rust-lang/rust/pull/120055) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=bc1b9e0e9a813d27a09708b293dc2d41c472f0d0&end=eaff1af8fdd18ee3eb05167b2836042b7d4315f6&stat=instructions:u)

| (instructions:u)                   | mean  | range           | count |
|:----------------------------------:|:-----:|:---------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -               | 0     |
| Regressions ❌ <br /> (secondary)  | 1.1%  | [0.7%, 3.5%]    | 7     |
| Improvements ✅ <br /> (primary)   | -2.4% | [-14.1%, -0.5%] | 233   |
| Improvements ✅ <br /> (secondary) | -1.6% | [-8.0%, -0.3%]  | 160   |
| All ❌✅ (primary)                 | -2.4% | [-14.1%, -0.5%] | 233   |


Rollup of 8 pull requests [#121055](https://github.com/rust-lang/rust/pull/121055) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=37b65339c8cf1d18e331f184dbf70bbddcb1e4f7&end=7508c3e4c1349e3dd405547bc7dd8d9549e105b6&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | 0.2%  | [0.2%, 0.2%]   | 2     |
| Regressions ❌ <br /> (secondary)  | 0.9%  | [0.8%, 0.9%]   | 2     |
| Improvements ✅ <br /> (primary)   | -0.9% | [-1.8%, -0.2%] | 9     |
| Improvements ✅ <br /> (secondary) | -0.6% | [-1.1%, -0.3%] | 21    |
| All ❌✅ (primary)                 | -0.7% | [-1.8%, 0.2%]  | 11    |


`cargo update` [#120454](https://github.com/rust-lang/rust/pull/120454) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=7508c3e4c1349e3dd405547bc7dd8d9549e105b6&end=cc1c0990ab6f7136d1d54fd008598095b2c53c66&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 1.4%  | [0.8%, 1.9%]   | 10    |
| Improvements ✅ <br /> (primary)   | -     | -              | 0     |
| Improvements ✅ <br /> (secondary) | -0.9% | [-3.4%, -0.2%] | 15    |
| All ❌✅ (primary)                 | -     | -              | 0     |


Store static initializers in metadata instead of the MIR of statics. [#116564](https://github.com/rust-lang/rust/pull/116564) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=4ae1e79876fcee94a56c1edf7c029a677084d7fc&end=6a4222b5119bce8c24e74dd3ad44006ce0c803e6&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 15.9% | [0.4%, 81.2%]  | 8     |
| Improvements ✅ <br /> (primary)   | -0.4% | [-0.5%, -0.2%] | 8     |
| Improvements ✅ <br /> (secondary) | -2.5% | [-8.9%, -0.4%] | 18    |
| All ❌✅ (primary)                 | -0.4% | [-0.5%, -0.2%] | 8     |


Clean up potential_query_instability with FxIndexMap and UnordMap [#120931](https://github.com/rust-lang/rust/pull/120931) [(Comparison Link)](https://perf.rust-lang.org/compare.html?start=6a4222b5119bce8c24e74dd3ad44006ce0c803e6&end=fa9f77ff35b4b63ed0cef9a9642c8f881b33f14f&stat=instructions:u)

| (instructions:u)                   | mean  | range          | count |
|:----------------------------------:|:-----:|:--------------:|:-----:|
| Regressions ❌ <br /> (primary)    | -     | -              | 0     |
| Regressions ❌ <br /> (secondary)  | 0.2%  | [0.2%, 0.2%]   | 4     |
| Improvements ✅ <br /> (primary)   | -0.2% | [-0.2%, -0.2%] | 2     |
| Improvements ✅ <br /> (secondary) | -6.6% | [-6.6%, -6.6%] | 1     |
| All ❌✅ (primary)                 | -0.2% | [-0.2%, -0.2%] | 2     |


#### Untriaged Pull Requests

- [#121087 Always evaluate free constants and statics, even if previous errors occurred](https://github.com/rust-lang/rust/pull/121087)
- [#120931 Clean up potential_query_instability with FxIndexMap and UnordMap](https://github.com/rust-lang/rust/pull/120931)
- [#120862 Rollup of 6 pull requests](https://github.com/rust-lang/rust/pull/120862)
- [#120809 Use `transmute_unchecked` in `NonZero::new`.](https://github.com/rust-lang/rust/pull/120809)
- [#120401 Rollup of 12 pull requests](https://github.com/rust-lang/rust/pull/120401)
- [#120335 Rollup of 10 pull requests](https://github.com/rust-lang/rust/pull/120335)
- [#119673 macro_rules: Preserve all metavariable spans in a global side table](https://github.com/rust-lang/rust/pull/119673)
- [#119662 Rollup of 9 pull requests](https://github.com/rust-lang/rust/pull/119662)
- [#119204 macro_rules: Less hacky heuristic for using `tt` metavariable spans](https://github.com/rust-lang/rust/pull/119204)
- [#119002 Rollup of 5 pull requests](https://github.com/rust-lang/rust/pull/119002)
- [#118661 Restore `const PartialEq`](https://github.com/rust-lang/rust/pull/118661)
- [#118473 Rollup of 5 pull requests](https://github.com/rust-lang/rust/pull/118473)
- [#118420 Introduce support for `async gen` blocks](https://github.com/rust-lang/rust/pull/118420)
- [#118405 Rollup of 7 pull requests](https://github.com/rust-lang/rust/pull/118405)
- [#118319 Rollup of 4 pull requests](https://github.com/rust-lang/rust/pull/118319)
- [#118308 Don't warn an empty pattern unreachable if we're not sure the data is valid](https://github.com/rust-lang/rust/pull/118308)
- [#117772 Tracking import use types for more accurate redundant import checking](https://github.com/rust-lang/rust/pull/117772)
- [#117769 Rollup of 6 pull requests](https://github.com/rust-lang/rust/pull/117769)
- [#117736 Rollup of 6 pull requests](https://github.com/rust-lang/rust/pull/117736)
- [#117213  Reorder check_item_type diagnostics so they occur next to the corresponding `check_well_formed` diagnostics](https://github.com/rust-lang/rust/pull/117213)
- [#117180 Rollup of 7 pull requests](https://github.com/rust-lang/rust/pull/117180)
- [#116940 Rollup of 4 pull requests](https://github.com/rust-lang/rust/pull/116940)
- [#116915 Add an assume that the index is inbounds to slice::get_unchecked](https://github.com/rust-lang/rust/pull/116915)
- [#116889 Eat close paren if capture_cfg to avoid unbalanced parens](https://github.com/rust-lang/rust/pull/116889)
- [#116492 Rollup of 7 pull requests](https://github.com/rust-lang/rust/pull/116492)
- [#116391 exhaustiveness: Rework constructor splitting](https://github.com/rust-lang/rust/pull/116391)
- [#116183 Always preserve DebugInfo in DeadStoreElimination.](https://github.com/rust-lang/rust/pull/116183)
- [#116033 report `unused_import` for empty reexports even it is pub](https://github.com/rust-lang/rust/pull/116033)
- [#115762 Explain revealing of opaque types in layout_of ParamEnv](https://github.com/rust-lang/rust/pull/115762)
- [#115751 some inspect improvements](https://github.com/rust-lang/rust/pull/115751)

#### Nags requiring follow up

TODO: Nags

